\documentclass[10pt,a4paper]{article}
\input{./preamble.tex}

\title{Ramsey Theory}
\begin{document}
\maketitle
\tableofcontents
\newpage
\section{Monochromatic Systems}
Here, we let $\N = \{1,2,3,\ldots\}$, and write $[n] = \{1,2,\ldots, n\}$. For a set $X$ and $r \in \N$, we write $X^{(r)} = \{A \subset X : |A|=r\}$, the collection of all $r$-sets in $X$.

Suppose we are given a $2$-colouring of $\N^{(2)}$, i.e. a function $C: \N^{(2)} \to \{1,2\}$. We can think of this being a colouring of the edges of the complete graph on $\N$. Can we find an infinite monochromatic $M$, i.e. a set $M \subset \N$ such that $C$ is constant on $M^{(2)}$.

\textbf{Examples}
\begin{enumerate}
  \item Colour $ij$ (shorthand for the set ${i,j}$) red if $i+j$ is even, and blue if $i+j$ is odd. Here, the answer is yes - take $M = 2\N = \{2,4,6,\ldots\}$.
  \item Colour $ij$ red if $\max\{n: 2^n|i+j\}$ is even, and blue if it is odd. The answer is yes - $M = \{4^0,4^1,4^2,4^3,\ldots\}$.
  \item Colour $ij$ red if $i+j$ has an even number of distinct prime factors, and blue if odd. This is more difficult. To save some time, we shall use the following theorem to answer every question of this form:
\end{enumerate}
\begin{theorem}[Ramsey's Theorem]
  Let $C: \N^{(2)} \to \{1,2\}$ be a 2-colouring of $\N^{(2)}$. Then there exists an infinite monochromatic subset of $\N$.
\end{theorem}
\begin{proof}
  Pick $a_1 \in \N$. Then there are infinitely many edges out of $a_1$, so infinitely many have the same colour - say all edges from $a_1$ to the infinite set $B_1$ have colour $c_1$.

  Now pick $a_2 \in B_1$. There must be some infinite set $B_2 \subseteq B_1\setminus\{a_2\}$ with all edges $a_2$ to $B_2$ are the same colour, say $c_2$, and repeat inductively.

  We then obtain $a_1, a_2, a_3, \ldots$ and colours $c_1, c_2, c_3, \ldots$ such that $a_ia_j$ for $i<j$ has colour $c_i$. Now infinitely many of the $c_i$ must be the same colour, say $c$. Then we may take $M = \{a_i: c_i = c\}$.
\end{proof}

\textbf{Remarks}
\begin{enumerate}
  \item This is sometimes called a 2-pass proof - we went through all the numbers to build the sequence $a_1, a_2, \ldots$.
  \item In example 3, no explicit example is known.
  \item The exact same proof works for $n$ colours. Alternatively, we could deduce this from Ramsey's theorem + induction - view the colours as `1' and `2 or 3 or ...'. If the infinite set is coloured 1, we are done, otherwise repeat with the $n-1$ colours remaining.
  \item An infinite monochromatic set is more than having arbitrarily large finite monochromatic sets. For example, make $\{1\}, \{2,3\}, \{4,5,6\}, \ldots$ all monochromatic blue sets, but make all edges between them red. Then there is no infinite monochromatic blue set (there is however an infinite red set - $\{1,3,6,\ldots\}$).
\end{enumerate}

\textbf{Example.}
Any sequence $x_1, x_2, \ldots$ in $\R$ (or any totally ordered set) has a monotone subsequence. This was seen in Analysis I, where the proof worked by fiddling around with lim sups and lim infs. Instead, just colour $ij$ `up' if $x_i \leq x_j$, and `down' if $x_i>x_j$. Then apply Ramsey's theorem.

What if we coloured $\N^{(r)}$, say for $r = 3,4,\ldots$? Given a 2-colouring $C:\N^{(r)}\to \{1,2\}$, must there be an infinite monochromatic set?

For example, take $r = 3$. Colour $ijk$ red if $i|j+k$, and blue if not. Yes - take powers of two. As in the case $r = 2$, we can always do this:
\begin{theorem}[Ramsey for $r$-sets]
  Let $r \in \N$. Then if $C:\N^{(r)} \to \{1,2\}$ is a 2-colouring of $\N^{(r)}$, there exists a monochromatic subset of $\N$.
\end{theorem}
\begin{proof}
  $r = 1$ is trivial - just infinite pigeonhole. $r = 2$ is \textbf{Theorem 1.1}. We then induct on $r$ - suppose our result holds for $r - 1$.

  Pick $a_1 \in \N$. We have an induced colouring $D:(\N\setminus\{a_1\})^{(r-1)} \to \{1,2\}$ given by $D(F) = C(F\cup\{a_1\})$. By induction, there is an infinite $B_1 \subset \N\setminus \{a_1\}$, monochromatic for the colouring $D$. That is, $C(F\cup\{a_1\}) = c_1$ for all $F \subset B_1^{(r-1)}$.

  Repeating for $B_1$, we have $a_2 \in B_1$ and an infinite $B_2 \subset B_1 \setminus \{a_2\}$ with all $F\cup\{a_2\}, F \in B_2^{(r-1)}$ have the same colour, $c_2$ say.

  We thus obtain distinct $a_1, a_2, \ldots$ and colours $c_1, c_2, \ldots$ such that $C(a_{i_1}a_{i_2}\ldots a_{i_r}) = c_{i_1}$. But infinitely many of the $c_i$ agree, say all $i \in I$, and so $\{a_i:i \in I\}$ is our set.
\end{proof}
\textbf{Example.} We saw from \textbf{Theorem 1.1} that, given points $(1, x_1), (2,x_2), \ldots$ in $\R^2$, there is a subsequence such that the induced function is monotone. In fact, we can ensure that the induced function is either convex or concave. Just 2-colour the triples $ijk$ in $\N^{(r)}$ red if the points $(i,x_i), (j, x_j), (k, x_k)$ are convex, and blue if they are concave (pick either if they are collinear). Then apply \textbf{1.2}.

Surprisingly, the infinite version of Ramsey implies the finite version.
\begin{theorem}[Finite Ramsey]
  For all $m, r \in \N$, there is some $n \in \N$ such that whenever $[n]^{(r)}$ is 2-coloured, there is a monochromatic $m$-set.
\end{theorem}
\begin{proof}
  Suppose not. We'll show that there is a 2-colouring of $\N^{(r)}$ without a monochromatic $m$-set, contradicting \textbf{Theorem 1.2}. For each $n \geq r$, we have a 2-colouring $C_n$ or $[n]^{(r)}$ with no monochromatic $m$-set. We would like to take their union to get a bad colouring of $\N^{(r)}$, but can't do this, since they might not agree with each other. There are only finitely many ways to 2-colour $[r]^{(r)}$ (two in fact), so infinitely many of the $C_n$ agree on $[r]^{(r)}$ - say $C_n|_{[r]^{(r)}} = D_r$ for all $n \in A_1$ and some colouring $D_r: [r]^{(r)} \to \{1,2\}$, where $A_1$ is infinite.

  There are only finitely many ways to 2-colour $[r+1]^{(r)}$, so infinitely many of the $C_n, n \in A_1$ agree on $[r+1]^{(r)}$ - say they are $D_{r+1}$ on $[r+1]^{(r)}$ for all $n \in A_2 \subset A_1$. Continue inductively.

  We obtain colourings $D_n : [n]^{(r)}\to \{1,2\}$ for each $n \geq r$, such that:
  \begin{enumerate}
    \item $D_n$ has no monochromatic $m$-set, as $D_n = C_{n'}|_{[n]^{(r)}}$ for some $n' \geq n$, where $C_{n'}$ has no monochromatic $m$-set.
    \item The $D_n$ are nested in the following way: $D_{n'}|_{[n]^{(r)}} = D_n$ for all $n' > n$.
  \end{enumerate}
  Now put $C:\N^{(r)} \to \{1, 2\}; C(F) = D_n(F)$ for any $n \geq \max F$. This is well defined by property 2 and has no monochromatic $m$-set by 1. $\contr$
\end{proof}

\textbf{Remark.} This is called a \emph{compactness argument}: what we are showing is that the space $\{1,2\}^{\N}$ of 2-colourings, with the product topology, is (sequentially) compact. Note also that this proof gives no information on how large $n = n(m,r)$ has to be. There are direct proofs giving bounds.

What if we colour $\N^{(2)}$ with infinitely many colours, i.e. we have $C: \N^{(2)} \to X$, some set $X$. Of course we do not get an infinite monochromatic set ever time - e.g. colour every pair with a different colour. However, this colouring is injective on this set. We might ask, in our quest for order amongst chaos, ``Do we always get an infinite set $m$ son which $C$ is either constant or injective?''

It turns out the answer to this question is also no: let $C(ij) = i$ ($i < j$, as usual). However, this is essentially the only way things can go wrong:
\begin{theorem}[Canonical Ramsey Theorem]
  Let $C$ be a colouring of $\N^{(2)}$ with an arbitrary set of colours. Then there exists an infinite set $M \subset \N$ such that one of:
  \begin{enumerate}
    \item $C$ is constant on $M^{(2)}$.
    \item $C$ is injective on $M^{(2)}$.
    \item For all $ij, k\ell \in M^{(2)}$, $C(ij) = C(k\ell) \iff i=k$.
    \item For all $ij, k\ell \in M^{(2)}$, $C(ij) = C(k\ell) \iff j=\ell$.
  \end{enumerate}
\end{theorem}
Note that this implies Ramsey's theorem, as cases 2,3,4 all require infinitely many colours.
\begin{proof}
  Define a 2-colouring of $\N^{(4)}$ by giving $ijk\ell$ the colour \textit{same} if $C(ij) = c(k\ell)$ and \textit{diff} if $C(ij) = C(k\ell)$.

  By Ramsey for 4-sets, there is an infinite monochromatic $M_1$ for this colouring. If it has colour \textit{same}, then we have case $1$. Indeed, given $ij, k\ell \in M_1^{(2)}$, choose $m<n$ with $m>i,j,k,\ell$. Then $C(ij) = C(mn) = C(k\ell)$.

  Otherwise, $M_1$ has colour \textit{diff}. Now 2-colour $M_1^{(4)}$ by giving $ijk\ell$ colour \textit{same} if $C(jk) = C(i\ell)$, and \textit{diff} otherwise. Again, by Ramsey for 4-sets we have an infinite $M_2\subseteq M_1$ monochromatic for this colouring. Note that it cannot be \textit{same}, as then we would have $i<j<k<\ell<m<n$ with $C(jk) = C(in) = C(\ell m)$, giving a contradiction with the previous colouring.

  Now 2-colour $M_2^{(4)}$, giving $ijk\ell$ \textit{same} if $C(ik) = C(jl)$, and \textit{diff} if not. Again, get monochromatic infinite $M_3$. Now $M_3$ cannot have colour \textit{same} as above, hence it has colour \textit{diff}.

  Now 2-colour $M_3^{(3)}$ by giving $ijk$ colour \textit{same} if $C(ij)=C(jk)$, and \textit{diff} if not. We then have an infinite monochromatic $M_4 \subseteq M_3$. Cannot have $M_4$ of colour \textit{same}, else have $i<j<k<\ell$ with $C(ij) = C(jk) = C(k\ell)\contr$, so $M_4$ has colour \textit{diff}.

  Now 2-colour $M_4^{(3)}$ by giving $ijk$ colour \textit{left-same} if $C(ij) = C(ik)$, and \textit{left-diff} if not. We obtain infinite monochromatic $M_5 \subseteq M_4$.

  Finally, 2-colour $M_5^{(3)}$, giving $ijk$ colour \textit{right-same} if $C(ij) = C(jk)$ and \textit{right-diff} if not. We obtain infinite monochromatic $M_6\subseteq M_5$.

  We then split into the cases:
  \begin{itemize}
    \item \underline{$M_6$ is \textit{left-diff} and \textit{right-diff}:} This is case 2. All edges are different.
    \item \underline{$M_6$ is \textit{left-same} and \textit{right-diff}:} This is case 3. The only edges that agree are ones that share a left vertex.
    \item \underline{$M_6$ is \textit{left-diff} and \textit{right-same}:} This is case 4. The only edges that agree are ones that share a right vertex.
    \item \underline{$M_6$ is \textit{left-same} and \textit{right-same}:} This cannot occur. If we have $i<j<k$ in $M_6$, then $C(ij) = C(ik) = C(jk)$, giving a contradiction.
  \end{itemize}
\end{proof}
\textbf{Remarks.}
\begin{enumerate}
  \item We could use just one colouring, colouring 4-sets $ijk\ell$ with the partition of $[4]^{(2)}$ induced by $C$ on $\{i,j,k,\ell\}$. This would use as many colours as there are partitions of a set of size $\binom{4}{2}$.
  \item Similarly, if $C:\N^{(r)} \to X$ is an arbitrary colouring, we get an infinite monochromatic $M \subset \N$ and a set $I \subset [r]$ such that, for all $x_1, \ldots, x_r, y_1,\ldots, y_r \in M^{(r)}$, we have $C(x_1\ldots x_r) = C(y_1\ldots y_r) \iff x_i = y_i \forall i \in I$. These $2^r$ colourings are called the \emph{canonical colourings} of the $r$-sets. In the case $r = 2$, we have the correspondence:
  \begin{center}
    \begin{tabular}{c|c}
      Case in \textbf{1.4} & $I \subset [2]$\\\hline
      1 & $\emptyset$\\
      2 & $\{1,2\}$\\
      3 & $\{1\}$\\
      4 & $\{2\}$
    \end{tabular}
  \end{center}
\end{enumerate}
\section{Van der Waerden's Theorem}
If we 2-colour $\N$, can we find 3 consecutive points of the same colour? Answer: of course not - just alternate colours! Ok - what about 3 equally spaced points, i.e. an arithmetic progression of length 3? This is not obviously false, but also not obviously true. What about even hoping for monochromatic arithmetic progressions of length $m$ for any $m \in \N$. (Here, we use ``length'' to mean the number of terms, not the number of jumps). This is van der Waerden's theorem, which will be the aim of this section.

By our usual compactness argument, this is the same as: for all $m$, there is $n$ such that whenever $[n]$ is 2-colored, there is a monochromatic AP of length $m$. Indeed, if this is false, then for every $n \geq m$, there is a colouring $C_n:[n]\to \{1,2\}$ with no monochromatic AP of length $m$. Then infinitely many agree on $[m]$, and of those infinitely many agree on $[m+1]$ and so on. Put together those nested restrictions to obtain a 2-colouring of $\N$ with no monochromatic AP of length $m \contr$.

In proving this, one key idea is to generalise: we show that for all $m, k$ there is some $n$ such that whenever $[n]$ is $k$-coloured there is a monochromatic AP of length $m$.

Note: proving a stronger result might be easier, e.g. in a proof by induction

Another key idea: given APs $A_1, \ldots, A_r$, each of length $m$, so $A_i = \{a_i, a_i+d_i, \ldots, a_i+(m-1)d_i\}$, we say they are \emph{focused} at $f$ if $a_i+md_i = f$ for all $i$. For instance, $\{1,4\}$ and $\{5,6\}$ are focused at 7.

If in addition each $A_i$ is monochromatic for a given colouring with no two the same colour, we call them \emph{colour-focused}.

So in a $k$-colouring, if we have APs $A_1, \ldots, A_k$ each of length $m-1$ that are colour focused, then we actually have a monochromatic AP of length $m$, by asking ``What colour is the focus?'' For instance, if we are 2-colouring and the sequences $\{1,4\}, \{5,6\}$ are colour-focused (say $\{1,4\}$ is red and $\{5,6\}$ is blue), then if 7 is red we have $\{1,4,7\}$ and if 7 is blue then we have $\{5,6,7\}$.

We will write $W(m,k)$ for the least $n$ (if it exists) such that whenever $[n]$ is $k$-coloured, there is a monochromatic AP of length $m$.
\begin{proposition}
  For all $k$ there is $n$ such that whenever $[n]$ is $k$-coloured there is a monochromatic AP of length 3.
\end{proposition}
Note - this is contained in van der Waerden's theorem - we prove it here for clarity.
\begin{proof}
  Claim: for all $r \leq k$ there exists $n$ such that whenever $[n]$ is $k$-coloured, we have either
  \begin{itemize}
    \item a monochromatic AP of length 3.
    \item or $r$ colour-focused APs of length 2.
  \end{itemize}
  Then we will be done - put $r = k$ and look at the focus.

  For $r = 1$, this is trivial - take $n=k+1$. Then we have 2 points of the same colour, so they form a monochromatic AP of length 1.

  We now proceed by induction: given $n$ suitable for $r-1$, we'll show that $(k^{2n}+1)2n$ is suitable for $r$.

  So now suppose we are given a $k$-colouring of $[(k^{2n}+1)2n]$ with no monochromatic AP of length 3. Break up this large set into blocks of length $2n$ - call them $B_1, B_2, \ldots, B_{k^{2n}+1}$, where $B_i = [(i-1)\cdot 2n+1, i\cdot 2n]$.

  Inside any interval of length $2n$ we have $r-1$ colour-focused APs of length $2$ (given by the choice of $n$) together with their focus (since we took $2n$).

  There are $k^{2n}$ ways of $k$-colouring a block, and therefore some two blocks are identically coloured - say $B_s$ and $B_{s+t}$.

  In $B_s$ we have $r-1$ colour focused APs of length 2 - say $\{a_1, a_1+d_!\}, \ldots, \{a_{r-1}, a_{r-1}+d_{r-1}$ focused at $f$. But now the APs $\{a_1, a_1+d_1+2nf\}, \ldots, \{a_{r-1}, a_{r-1}+d_{r-1}+2nf\}$ are colour-focused at $f+4nt$, and $\{f, f+2nt\}$ is also focused there. Hence we have $r$ colour-focused APs of length 2.
\end{proof}
\textbf{Remarks.}
\begin{enumerate}
  \item The idea of looking at the number of ways to colour a block is called a \emph{product argument}.
  \item The proof shows $W(3, k) \leq k^{k^{\iddots^{k^{4k}}}}$ where the tower has length $k$. This is called a \emph{tower-type bound}.
\end{enumerate}
\begin{theorem}[van der Waerden's Theorem]
  For all $m, k$ there exists $n$ such that whenever $[n]$ is $k$-coloured there exists a monochromatic AP of length $m$.
\end{theorem}
\begin{proof}
  Induction on $m$. $m=1$ is trivial - an AP of length $1$ is trivial. $m=2$ is just pigeonhole. $m=3$ was done above.

  We may assume that $W(m-1, k)$ exists for every $k$.

  Claim: for every $r \leq k$, there is an $n$ such that, whenever $[n]$ is $k$-coloured, we have either:
  \begin{itemize}
    \item a monochromatic AP of length $m$.
    \item or $r$ colour-focused APs of length $m-1$.
  \end{itemize}
  Then, as before, we will be done.

  We prove this claim by induction on $r$. $r=1$ is done by the induction hypothesis on $m$ -  we can take $n= W(m-1, k)$.

  Now given $n$ suitable for $r-1$, we'll show that $W(m-1, k^{2n})\cdot 2n$ is suitable for $r$.

  So, given a $k$-colouring of $[W(m-1, k^{2n})2n]$ with no monochromatic AP of length $m$: break up $[W(m-1, k^{2n})2n]$ into blocks of length $2n$, say $B_1, B_2, \ldots, B_{W(m-1, k^{2n})}$, where $B_i = [(i-1)2n + 1, i2n]$.

  Now, the number of ways to $k$-colour a block is $k^{2n}$. So, since we have $W(m-1, k^{n2})$ blocks, we must have $m-1$ equally spaced blocks, all coloured identically - say $B_s, B_{s+t}, \ldots, B_{s+(m-2)t}$.

  Inside $B_s$ we have $r-1$ colour-focused APs of length $m-1$ (by the definition of $n$), together with their focus. Say, $A_1, \ldots, A_{r-1}$ focused at $f$, where $A_i$ has first term $a_i$ and common difference $d_i$. Then the APs $A_1', \ldots, A_{r-1}'$, where $A_i'$ has first term $a_i$ and common difference $d_i + 2nt$, are colour focused at $f+(m-1)2n$. Also, $f, f +2nt, f+2\cdot 2nt, \ldots, f+(m-2)2nt$ is monochromatic of a different colour, focused at $f+(m-1)2n$.

  So we have the $r$ colour focused APs of length $m-1$.
\end{proof}
\subsection{The Ackermann or Grzegorczyk Hierarchy}
This is a sequence of functions $f_1, f_2, \ldots$, each $\N \to \N$, given by:
\begin{itemize}
  \item $f_1(x) = 2x$
  \item $f_{n+1}(x) = f_n^{(x)}(1)$
\end{itemize}
So $f_2(x) = 2^x$. $f_3(x) = 2^{2^{\iddots^2}}$, with the tower having $x$ 2s. We don't have notation for $f_4$, but we can compute $f_4(1) = 2, f_4(2) = 2^2 = 4, f_4(3) = 2^{2^{2^2}} = 65536$, and $f_4(4)$ is a tower of 2s of height 65536.

We say $f:\N \to \N$ if there are $c, d >0$ with $f_n(cx) \leq f(x) \leq f_n(dx)$. So our upper bound on $W(3, k)$ was a function of $k$ of type 3., and in general, our bound on $W(m,k)$ is of type $m$, and our bound on $W(m) = W(m,2)$ as a function of $m$ grows faster than every $f_n$. This is often a feature of such `double inductions', and for a long time it was thought that $W(m)$ does actually grow this fast.

Shelah (1987) found a proof of van der Waerden using induction only on $m$, and his proof gives $W(m,k) \leq f_4(m+k)$. Graham offered \$1000 for a bound on $W(m)$ of type 3. Gowers (1998) showed $W(m) \leq 2^{2^{2^{2^{2^{m+9}}}}}$.

For lower bounds, we know that $W(m) \geq \frac{2^m}{8m}$.
\begin{corollary}
  Whenever $\N$ is finitely coloured, some colour class contains arbitrarily long arithmetic progressions.
\end{corollary}
\begin{proof}
  For each $n$, there is a monochromatic AP of length $n$, of colour $c_n$. Some colour must occur infinitely often.
\end{proof}
\textbf{Remark.} We cannot guarantee an infinite AP - take 1 red, 2 blues, 3 reds, 4 blues, etc. Alternatively, there are only countably many infinite APs. List them in order, e.g. $A_1, A_2, \ldots$. Pick $x_1, y_1 \in A_1$ and colour them differently. Now pick distinct $x_2, y_2 \in A_2$ new, and make colour them differently. However, we do have the following:
\begin{theorem}[Strengthened van der Waerden]
  For every $m$, whenever $\N$ is finitely coloured, there exists an AP of length $m$ that, together with its common difference (i.e. $\{a, a+d, a+2d, \ldots, a+(m-1)d\}\cup\{d\}$), is monochromatic.
\end{theorem}
\begin{proof}
  Induction on $k$, the number of colours. $k=1$ is done.

  Given $n$ suitable for $k-1$, we'll show $W(n(m-1)+1, k)$ is suitable for $k$. So, given a $k$-colouring of $[W(n(m-1)+1, k)]$, we have a monochromatic AP of length $n(m-1)+1$, say $[a, a+d, a+2d, \ldots, a+n(m-1)d]$ red.

  If $d$ is red, then we are done, as $\{a, a+d, \ldots, a+(m-1)d\}\cup\{d\}$ is red.

  But also, if $2d$ is red, then we are done, as $\{a, a+2d, \ldots, a+2(m-1)d\}\cup\{2d\}$ is red. In fact, if any $rd$ for $1 \leq r\leq n$ is red, then we are done in the same way.

  Hence $\{d, 2d, \ldots, nd\}$ is $(k-1)$-coloured. But, by the inductive hypothesis, we are done, as this contains the required sequence by definition of $n$.
\end{proof}
\textbf{Remarks.} From now on we don't care about bounds. The bounds in the above proof are far too big to be reasonably describable on paper. The case $m=2$ is called \emph{Schur's Theorem}: whenever $\N$ is finitely coloured, there are monochromatic $x, y, z$ with $x+y=z$. We can also prove this directly from Ramsey. Indeed, given a $k$-colouring of $\N$, we construct a colouring of $\N^{(2)}$ via $d(ij) = c(j-i)$. Then there is a monochromatic triangle $ijk$. So $c(k-i) = c(k-j) = c(j-i)$, and $(k-j) + (j-i) = k-i$.
\section{The Hales-Jewett Theorem}
Let $X$ be a finite set. A subset $L$ of $X^n$ is called a \emph{line} or \emph{combinatorial line} if there is a non-empty $I \subset [n]$ and $a_i \in X$ for each $i \in [n]\setminus I$, such that $L = \{(x_1, \ldots, x_n) \in X^n: x_i = a_i \forall i \notin I, x_i=x_j \forall i,j \in I\}$. $I$ is called the active coordinates.

For example, in $[3]^2$, the lines are 3 vertical, 3 horizontal, and 1 diagonal. We don't allow the other diagonal, since there the $x$-coordinate goes up and the $y$-coordinate goes down. There is no assumed ordering on $X$, and so we want lines to be invariant under reordering. This other diagonal would cease to be a line if we reordered $X$, and hence we exclude it.
\begin{theorem}[Hales-Jewett Theorem]
  For all $m, k$ there exists $n$ such that, whenever $[m]^n$ is $k$-coloured, there is a monochromatic line.
\end{theorem}
\textbf{Remarks.}
\begin{enumerate}
  \item The least such $n$ is denoted $HJ(m,k)$.
  \item This essentially says that $m$-in-a-row noughts-and=crosses, played in enough dimensions, cannot end in a draw. As an exercise, show it is a win for the first player.
  \item Hales-Jewett (HJ) implies VDW. Just map $X^n$ linearly into $\N$, e.g. add up the coordinates. Indeed, given a $k$ colouring of $\N$ induce a $k$-colouring of $[m]^n$ by $d((x_1, \ldots, x_m)) = c(x_1+\ldots+x_m)$. So there is a monochromatic line $L$ in $[m]^n$, which corresponds to a monochromatic AP of length $m$ in $\N$, with common difference given by the number of active coordinates of $L$.
\end{enumerate}
For a line $L$ in $[m]^n$ write $L^-$ for its first point and $L^+$ for its last point. We say $L_1, \ldots, L_r$ are \emph{focused} at $f$ if $L_i^+ = f$ for all $i$, and \emph{colour focused} if they are each monochromatic (except at $f$) of different colours.
\begin{proof}[Proof of Hales-Jewett]
  We will do this by induction on $m$. $m=1$ is trivial.

  Now, given $m > 1$, we may assume $HJ(m-1, k)$ exists for all $k$.

  Claim: for all $r \leq k$ there exists $n$ such that, whenever $[m]^n$ is $k$-coloured there is either:
  \begin{itemize}
    \item a monochromatic line
    \item or $r$ colour-focused lines
  \end{itemize}
  If we can prove this then we're done, since then we put $r=k$ and look at the focus.

  We then prove this claim by induction on $r$. If $r=1$, then done, by taking $n = HJ(m-1,k)$.

  Given $n$ suitable for $r-1$, we'll show $n + HJ(m-1, k^{m^n})$ is suitable for $r$. Write $n'$ for $HJ(m-1, k^{m^n})$. So, given a $k$-colouring of $[m]^{n+n'}$ with no monochromatic line, view $[m]^{n+n'}$ as $[m]^n \times [m]^{n'}$. At each point of $[m]^{n'}$ there are $k^{m^n}$ ways to colour $[m]^n$.

  So, by choice of $n'$, we have a line $L$ in $[m]^{n'}$ such that, for all $a \in [m]^n$ and $b,b' \in L\setminus\{L^+\}$ we have $c(a,b) = c(a,b') = c'(a)$, say.

  By definition of $n$, $c'$ has $r-1$ colour focused lines, say $L_1, \ldots, L_{r-1}$, with active coordinate sets $J_1, \ldots, J_{r-1}$, focused at $f$. Let $L$ have active coord set $I$. Then the lines $L_1', \ldots, L_{r-1}'$ where $L_i'$ starts at $L_i', L^-$ and has active coord set $J_i \cup I$ are colour focused at $(f, L^+)$, and also the line starting at $(f, L^-)$ with active coords set $I$, are a set of $r$ colour focused lines at $(f, L^+)$. Hence we are done.
\end{proof}
This is essentially the van der Waerden proof, just slightly rephrased.

A \emph{d-dimensional subspace} of $X^n$ is a set $S \subset X^n$ such that there exist disjoint $I_1, \ldots, I_d \subseteq [n]$, and points $a_i \in X$ for each $i \in [n]\setminus(I_1\cup\ldots\cup I_d)$, such that every point in $S$ has $i\th$ coordinate $a_i$ if $i \notin I_1\cup\ldots\cup I_d$, and if $i,j \in I_k$ for some $k$ then $x_i=x_j$.
\begin{theorem}[Extended Hales-Jewett Theorem]
  For any $m,k,d$, there is an $n$ such that any $k$-colouring of $[m]^n$ contains a monochromatic $d$-dimensional subspace.
\end{theorem}
\begin{proof}
  View $X^{dn}$ as $(X^d)^n$, i.e. $n$-coordinates, each of which is a point in $X^d$.

  Clearly any line in $(X^d)^n$ corresponds to a $d$-dimensional subspace of $X^{dn}$, so we are done -  we can take $n=dHJ(m^d,k)$.a
\end{proof}
Let $S$ be a finite subset of $\N^d$. A \emph{homothetic copy} of $S$ is any set of the form $a+\lambda S$, where $a \in \N^d$ and $\lambda \in \N$. For instance, the homothetic copies of $[n]$ in $\N$ are precisely the APs of length $n$.
\begin{theorem}
  Let $S$ be a finite subset of $\N^d$. Then, whenever $\N^d$ is finitely coloured, there is a monochromatic homothetic copy of $S$.
\end{theorem}
\begin{proof}
  Let $S = \{S(1), \ldots, S(m)\}$. Given a $k$-colouring $c$ of $\N^d$, we induce a $k$-colouring $c'$ of $[m]^n$ where $n$ is large by $c'(x_1, \ldots, x_n) = c(S(x_1)+\ldots +S(x_n))$. We have a monochromatic line $L$ for $c'$ , say with active coordinate set $I$. But now, taking $S(x_1)+\ldots +S(x_n)$ for ecah $x \in L$, we have a monochromatic homothetic copy of $S$ with $\lambda = |I|$.
\end{proof}
There is an alternate proof via product arguments and focusing.

\section{Partition Regular Equations}
\subsection{Rado's Theorem}
Schur says whenever $\N$ is finitely coloured, there is a monochromatic $x,y,z$ with $x+y=z$. Strengthened WDW says whenever $\N$ is finitely coloured, there is a monochromatic $x_1, x_2, y_1, y_2, \ldots, y_m$ such that $y_1=x_1+x_2, y_2=x_1+2x_2, \ldots, y_m = x_1+mx_2$.

Let $A$ be an $m\times n$ matrix with rational entries. We say $A$ is \emph{partition regular} if whenever $\N$ is finitely coloured, there is a monochromatic $x \in \N^n$ with $Ax=0$.

For example, Schur states that $\begin{pmatrix} 1 & 1 & -1 \end{pmatrix}$ is partition regular.

Strengthened VDW says $\begin{pmatrix} 1 & 1 & -1 & 0 & 0 &\cdots & 0\\ 1 & 2 & 0 & -1&0 & \cdots & 0\\ 1 & 3 & 0 & 0 & -1 & \cdots & 0 \\  &  & \vdots & & & & & \\ 1 & m & 0 & 0& 0& \cdots & -1\end{pmatrix}$ is partition regular.

For more examples, we can see obviously that $\begin{pmatrix} 2 & 3 & -5 \end{pmatrix}$ is partition regular - take $x = y = z$. What about something like $\begin{pmatrix} 2 & 3 & -6 \end{pmatrix}$?

\textbf{Remarks.}
\begin{enumerate}
  \item If $A$ is partition regular, then so is $\lambda A$ for any $\lambda \in \Q$. So we can assume that all entries of $A$ are integers.
  \item We can also say `the system of equations $Ax = 0$ is partition regular.'
  \item Not all matrices are partition regular: $\begin{pmatrix} 1 & -2 \end{pmatrix}$ is not partition regular. Indeed, if it were PR, then for any colouring there is $x$ such that $x$ and $2x$ are the same colour. But we can 2-colour $\N$ by the parity of the highest power of $2$ dividing $x$.
\end{enumerate}
Let $A$ be an $m \times n$ rational matrix with columns $C^{(1)}, \ldots, C^{(n)} \in \Q^m$. We say $A$ has the \emph{columns property} if there exists a partition $B_1 \cup \ldots \cup B_r$ of $[m]$ such that
\begin{itemize}
  \item $\sum_{i \in B_1}C^{(i)} = 0$
  \item $\sum_{i \in B_s}C^{(i)} \in \angle{C^{(i)}:i \in B_1 \cup\ldots \cup B_{s-1}}$ for $s >1$
\end{itemize}
For example:
\begin{enumerate}
  \item $\begin{pmatrix} 1 & 1 & -1 \end{pmatrix}$ has the columns property: $B_1 = \{1,3\}, B_2 = \{2\}$.
  \item $\begin{pmatrix} 2 & 3 & -5\end{pmatrix}$ has the columns property: $B_1 = \{1,2,3\}$.
  \item $\begin{pmatrix} 1 & -2 \end{pmatrix}$ does not have the columns property. In fact, $\begin{pmatrix} 1 & -\lambda \end{pmatrix}$ only has the columns property when $\lambda = 1$, and is also partition regular if and only if $\lambda = 1$.
  \item $\begin{pmatrix} 1 & 1 & -1 & 0 & 0 &\cdots & 0\\ 1 & 2 & 0 & -1&0 & \cdots & 0\\ 1 & 3 & 0 & 0 & -1 & \cdots & 0 \\  &  & \vdots & & & & & \\ 1 & m & 0 & 0& 0& \cdots & -1\end{pmatrix}$ has the columns property: take $B_1 = \{1,3,4,\ldots, m\}$, and $B_2 = \{2\}$.
\end{enumerate}
The aim of this chapter is to prove Rado's theorem, that partition regularity is equivalent to the columns property. This gives a finite check of partition regularity. However, neither direction is immediately obvious - this is quite an unusual thing in combinatorics.

For clarity, we will start with Rado for a single equation, so that $m = 1$. Note that here the columns property is equivalent to some non-empty subset of the non-zero entries summing to 0, or all of them being zero.

So our task is, given non-zero $a_1, \ldots, a_n \in \Q$, the equation $a_1x_2 +\ldots + a_nx_n = 0$ is partition regular if and only if $\sum_{I} a_i = 0$ for some nonempty $I \subset [n]$. Note that neither direction is obvious. We expect the right to left direction to be harder.

Fix a prime $p$. Write $d(x)$ for the last non-zero digit of $x$ in base $p$. I.e., if $x = d_rp^r + d_{r-1}p^{r-1} + \ldots + d_1p^1 + d_0$, then $L(x) = \min\{i:d_i \neq 0\}$, and $d(x) = d_{L(x)}$. This gives a $(p-1)$-colouring of $\N$.
\begin{proposition}
  Let $a_1, \ldots, a_n \in \Q\setminus \{0\}$, such that $(a_1 a_2 \ldots a_n)$ is partition regular. Then $\sum_{i \in I}a_i = 0$ for some $\emptyset \neq I \subset [n]$.
\end{proposition}
\begin{proof}
  Multiplying up, we may assume $a_i \in \Z$. Fix a large prime $p$, say $> \sum |a_i|$, and a $(p-1)$-colouring of $\N$ as above. We have a monochromatic $x_1, \ldots, x_n, \sum a_ix_i$ all with colour $d$. Let $L = \min_i \{L(x_i)\}$, and put $I = \{i : L(x_i) = L\}$.

  Then we have $\sum_{i \in I} a_i d =\equiv 0 \mod p$, and so $\sum_{i \in I}a_i \equiv 0 \mod p$, hence $\sum_{i \in I}a_i = 0$ by the choice of $p$.
\end{proof}
\textbf{Remarks.}
\begin{enumerate}
  \item Or, for every prime $p$, we get $I_p \subset[n]$ such that $\sum_{i \in I_p}a_i \equiv 0 \mod p$. Hence some $I$ occurs infinitely often, and then $\sum_{i \in I} a_i = 0$.
  \item We looked at rightmost digits. We can also do leftmost digits.
  \item Apart from these, no other proofs are known!
\end{enumerate}
\begin{lemma}
  Let $\lambda \in \Q$. Whenever the naturals are finitely coloured, there are monochromatic $x,y,z$ with $x+\lambda y = z$.
\end{lemma}
\begin{proof}
  Trivial if $\lambda = 0$, and if $\lambda < 0$ rewrite as $z - \lambda y = x$, so wlog we can assume $\lambda > 0$. Write $\lambda = r/s$ for some $r, s \in \N$.

  Task: for every $k$ there exists some $n$ such that whenever $[n]$ is $k$-coloured, there exist monochromatic $x,y,z$ with $x+(r/s)y = z$.

  We do this by induction on $k$ - whenever $k = 1$ this is easy ($n=\max(s,r+1), x=1, y=s, z=r+1$). Now, given $n$ suitable for $k-1$, we'll show that $sW(nr+1,k)$ is suitable for $k$.

  Indeed, given $k$-colouring of $[sW(nr+1, k)]$, inside each $[W(nr+1, k)]$ there is a monochromatic AP of length $nr+1$, say $a, a+d, a+2d, \ldots, a+(nr)d$ all red.

  If any $isd, 1\leq i \leq n$ is red, then we are done - take $x= a, y=isd, z=a+ird$. So wlog we may assume that $sd, 2sd, \ldots, 2sd$ is $k-1$-coloured without reds, and so we're done by induction, from our choice of $n$.
\end{proof}
\textbf{Remarks.} This is very similar to the proof of strengthened VDW. For general $\lambda$, this seems not to follow directly from Ramsey's theorem, unlike the case $\lambda = 1$.

\begin{theorem}[Rado for a single equation]
  Let $a_1, \ldots, a_n \in \Q \setminus \{0\}$. Then $(a_1 \ldots a_n)$ is partition regular if and only if $\sum_{i \in I}a_i = 0$ for some $\emptyset \neq I \subset [n]$.
\end{theorem}
\begin{proof}
  The forwards direction is done in proposition \textbf{4.1}.

  For the other direction, fix $i_0 \in I$. For suitable $x,y,z$, we'll put $x_i = x$ if $i=i_0$, $z$ if $i \in I \setminus \{i_0\}$, and $y$ if $i \notin I$.

  So we need $x,y,z$ monochromatic and:
  \[a_{i_0}x + \left(\sum_{i \in I\setminus \{i_0\}} a_i\right) z +\left(\sum_{i \notin I} a_i\right)y = 0\]
  i.e. $a_{i_0}x - a_{i_0} z + \left(\sum_{i \notin I}a_i\right) y =0$. Cancelling the $a_{i_0}$, we are done by the previous lemma.
\end{proof}
\textbf{Rado's Boundedness Conjecture}
Suppose an $m\times n$ matrix $A$ is not partition regular, so for some $k$, there is a bad $k$-colouring of $\N$. Can we bound $k$, in terms of $m$ and $n$? In other words, is there a function $k = k(m,n)$ such that, for any $m \times n$ matrix $A$, we have partition regularity for $k(m,n)$ colours implies partition regularity for any number of colours?

Fox and Kleitman (2006) showed that 24 colours suffice for the case of $1 \times 3$ matrices. This is still open for every other matrix size.

\begin{proposition}
  Let $A$ be an $m \times n$ rational matrix that is partition regular. Then $A$ has the columns property.
\end{proposition}
\begin{proof}
  WLOG all entries are integers. Let the columns of $A$ be $C^{(1)}, \ldots, C^{(n)} \in \Z^m$.

  Given a prime $p$, colour $\N$ by giving $x \in \N$ the colour $d(x)$ (the last nonzero digit of $x$ in base $p$). We have a monochromatic $x_1, \ldots, x_n \in \N$ with $Ax = 0$ - say all $x_i$ have colour $d$.

  Partition $[n]$ as $B_1 \cup \ldots \cup B_r$, where $i,j \in B_s \iff L(x_i) = L(x_j)$. Then $i \in B_s, j \in B_t \iff L(x_i) < L(x_j)$ for any $s < t$.

  Infinitely many $p$ give the same partition, say all $p \in P$.

  Fix $p \in P$, and consider the sum $\sum x_i C^{(i)} = 0$, calculated in base $p$. We have:
  \begin{itemize}
    \item $\sum_{i \in B_1} dC^{(i)} \equiv 0 \mod p$.
    \item For each $s \geq 2, p^t \sum_{i \in B_s} dC^{(i)} + \sum_{i \in B_1 \cup \ldots \cup B_{s-1}} x_i C^{(i)} \equiv 0 \mod p^{t+1}$.
  \end{itemize}
  From the first we get $\sum_{i \in B_1}C^{(i)} \equiv 0 \mod p$, since $d$ is invertible. Since this holds for infinitely many $p$, $\sum_{i \in B_1}C^{(i)} = 0$.

  From the second, for each $s \geq 2$, $p^t \sum_{i \in B_s} C^{(i)} + \sum_{i \in B_1 \cup \ldots \cup B_{s-1}} d^{-1} x_i C^{(i)} \equiv 0 \mod p^{t+1}$. We now claim that $\sum_{i \in B_s}C^{(i)} \in \angle{C^{(i)}: i \in B_1\cup \ldots \cup B_{s-1}}$.

  Indeed, suppose not. Then there's a vector $U \in \Z^m$ with $U \cdot C^{(i)} = 0$ for every $i \in B_1 \cup \ldots \cup B_{s-1}$, $U \cdot \sum_{i \in B_s}C^{(i)} \neq 0$. Dot with $U$: then we have
  \[p^t U \cdot \sum_{i \in B_s}C^{(i)} + 0 \equiv 0 \mod p^{t+1}\]
  So $U \cdot \sum_{i \in B_s}C^{(i)} \equiv 0 \mod p$. But this holds for all $p \in P$, so $U \cdot \sum_{i \in B_s}C^{(i)} = 0$ - contradiction.
\end{proof}
Let $m,p,c \in \N$. A subset $S \subset \N$ is a called  an $(m,p,c)$-set if there exist naturals $x_1, \ldots, x_n$ (``the generators'') such that
\[S = \{\sum_{i=1}^m \lambda_i x_i: \exists j\text{ with }\lambda_i = 0 \forall i < j, \lambda_j =c, \lambda_i \in [-p,p] \forall i >j\}\]
So $S$ consists of all $cx_1 + \lambda_2 x_2 + \ldots + \lambda_m x_m$ for $\lambda_i \in [-p,p]$, all $cx_2 + \lambda_3 x_3 + \ldots + \lambda_m x_m$, and so on, down to elements of the form $cx_{m-1}+\lambda_m x_m$, and $cx_m$. These subsets are often called the rows of $S$.

E.g. a $(2,p,1)$-set is $\{x_1-px_2, x_1-(p-1)x_2, \ldots, x_1+px_2, x_2\}$. I.e., an AP of length $2p+1$, together with its common difference.

A $(2,p,3)$-set is $\{3x_1-px_2,\ldots, 3x_1+px_2, 3x_2\}$. I.e., an AP of length $2p+1$ with middle term a multiple of 3, together with thrice its common difference.

\begin{theorem}
  Let $m,p,c \in \N$. Whenever $\N$ is finitely coloured, there is a monochromatic $(m,p,c)$-set.
\end{theorem}
\begin{proof}
  Fix $k$, a number of colours.

  We then claim for all $M$ there is $n$ such that, whenever $[n]$ is $k$-coloured, there is an $(m,p,c)$-set with each row monochromatic.

  Then we are done - put $M = km$ and observe that some $m$ rows must be the same colour, yielding a monochromatic $(m,p,c)$-set.

  The case $M = 1$ is trivial.

  Now, given $M > 1$, consider a $k$-colouring of $[n]$ where $n$ is large. Inside $\{c, 2c, 3c, \ldots, \floor{n/c}c\}$, we have an AP of length $2d+1$ ($d$ large). Say that AP is $A = \{cx_1-da, cx_2-(d-1)a, \ldots, cx_1, \ldots, cx_1+da\}$.

  Let $t = \floor{\frac{d}{Mp}}$, and consider $\{a, 2a, \ldots, ta\}$. If $t$ is large enough, this set contains (induction hypothesis) an $(m-1, p, c)$-set with all rows monochromatic, say on generators $x_2, \ldots, x_m$.

  Then $cx_1 + \lambda_2 x_2 + \ldots +\lambda_m x_m \in A$ for all $\lambda_i$ with $|\lambda_i| \leq p$, and so the $(M,p,c)$-set on generators $x_1, \ldots, x_m$ has all rows mono.
\end{proof}
The special case $(m,1,1)$ immediately gives the following: for $x_1, \ldots, x_m$ write $FS(x_1, \ldots, x_m)$ for $\{\sum_{i \in I}x_i :\emptyset \neq I \subset [m]\}$. Then:
\begin{corollary}
  For all $m$, whenever $\N$ is finitely coloured, there is $x_1, \ldots, x_m$ such that $FS(x_1, \ldots, x_m)$ is monochromatic.
\end{corollary}
Note that the case $m=2$ is Schur's theorem. Also, whenever $\N$ if finitely coloured there are $x_1, \ldots, x_m$ such that the set of all products of the $x_i$ is monochromatic, by restricting to $\{2^n : n \in \N\}$, which turns products into sums. How about both simultaneously? This is unknown, even in the case $m=2$! It is very hard, because there are no non-trivial ring homomorphisms $\Z \injection \Z$ - addition and multiplication don't mesh nicely. In fact, the case of just wanting $\{x+y, xy\}$ the same colour (apart from $x=y=2$) was only proven by Morera in 2017.

\begin{proposition}
  Let matrix $A$ have the columns property. Then there exist $m,p,c \in \N$ such that every $(m,p,c)$-set contains a solution of $Ax = 0$.
\end{proposition}
\begin{proof}
  Let the columns of $A$ be $C^{(i)}$ ($1\leq i\leq n$). Then we have a partition $B_1 \cup \ldots \cup B_r$ of $[n]$ such that, for all $s$, $\sum_{i \in B_s}C^{(i)} \in \angle{C^{(i)} : i \in B_1\cup\ldots \cup B_{s-1}}$.

  Say $\sum_{i\in B_s}C^{(i)} = \sum_{i \in B_1\cup\ldots\cup B_{s-1}} q_{is}C^{(i)}$ for some $q_{is} \in \Q$.

  Then for all $s$, we have $\sum_{i=1}^n d_{is}C^{(i)} = 0$, where $d_{is}$ is 0 if $i \notin B_1 \cup \ldots \cup B_s$, $1$ if $i \in B_s$, and $-q_{is}$ if $i \in B_1 \cup \ldots \cup B_{s-1}$.

  Given $x_1, \ldots, x_r \in \N$, define $y_1, \ldots, y_n$ by $y_i = \sum_{s} d_{is}x_s$.

  Then $Ay = \sum_i C^{i} \sum_s d_{is}x_s = \sum_s x_s \sum_i d_{is}C^{(i)} = 0$.

  So we are done: take $m = r$, $c = $ LCM of the denominators of the $q_{is}$, and $p = c \times$ max numerator of the $q_{is}$.
\end{proof}
Putting all these together, we have:
\begin{theorem}[Rado]
  Let $A$ be a matrix with entries in $\Q$. Then $A$ is partition regular iff $A$ has the columns property.
\end{theorem}
\begin{proof}
  For the forwards direction, use $\textbf{4.4}$. For the reverse direction, use $\textbf{4.5}$ and $\textbf{4.7}$.
\end{proof}
\textbf{Remarks.} Having proved Rado, results like VDW, Schur, finite sums etc. are trivial columns property checks. From the proof of Rado, we have, if a matrix $A$ is partition regular for each ``last digit base $p$'' colourings, then $A$ is partition regular for all colourings. No direct (i.e. not via Rado) proof of this statement is known.
\begin{theorem}[Consistency Theorem]
  Let $A$ and $B$ be partition regular matrices. Then $\begin{pmatrix} A & 0 \\ 0 & B\end{pmatrix}$ is partition regular.

  In other words, if we can always solve $Ax=0$ in one colour class, and also $By=0$ in one colour class, then we can solve them both in the same colour class.
\end{theorem}
\begin{proof}
  Trivial, by the columns property.
\end{proof}
This is highly non-obvious from the definition of partition regularity. This can be proven directly, not via Rado.
\begin{theorem}
  Whenever $\N$ is finitely coloured, there is a colour class containing a solution to every partition regular system of equations.
\end{theorem}
\begin{proof}
  Suppose not. Then we have a partition $D_1 \cup \ldots D_k$ of the naturals such that, for each $i$, there is a partition regular matrix $A_i$ with $D_i$ containing no solution to $A_i x = 0$.

  Now let $A = \diag(A_1, \ldots, A_k)$. Then $A$ is partition regular by the consistency theorem, but no $D_i$ contains a solution. $\contr$
\end{proof}
\subsection{Rado's Conjecture (1933)}
We say $D \subset \N$ is partition regular if $D$ contains a solution to every PR system of equations. So \textbf{4.10} says that, whenever $\N = D_1 \cup \ldots D_k$, then some $D_i$ is partition regular.  Now $\N$ is trivially partition regular, so Rado asked: if $D$ is partition regular, and $D = D_1 \cup \ldots D_k$, must some $D_i$ be partition regular?

This was proved by Deuber (1975). He introduced $(m,p,c)$-sets and proved a fact we know: a set $D$ is partition regular if and only if, for every $m,p,c$, $D$ contains an $(m,p,c)$-set. He showed that, for every $m,p,c,k$, there exist $n,q,d$, such that, whenever we $k$ colour an $(n,q,d)$-set, there exists a monochromatic $(m,p,c)$-set.

This is like our proof of \textbf{4.5}, but replacing the usage of Van der Waerden by extended Hales-Jewett.

\section{Ultrafilters}
For $x_1, x_2, \ldots$ in $\N$, we write $FS(x_1, x_2, \ldots) = \{\sum_{i \in I} x_i : \emptyset \neq I \subset \N \text{ finite}\}$.

Our aim for this section is Hindman's Theorem, which says that, whenever $\N$ is finitely coloured, there are $x_1, x_2, \ldots$ with $FS(x_1, x_2, \ldots)$ monochromatic. Note that this isn't trivially false, since there are uncountably many such sets, so the trick we used to ruin infinite arithmetic progressions doesn't work.

The idea of the definitions is that a filter is a notion of `large' for subsets of $\N$; an ultrafilter is a more refined such notion.

A \emph{filter} is a non-empty family $\mathcal{F}\subset \P(\N)$ such that:
\begin{enumerate}
  \item $\emptyset \notin \mathcal{F}$
  \item If $A \in \mathcal{F}$ and $A \subseteq B$, then $B \in \mathcal{F}$.
  \item If $A \in \mathcal{F}$ and $B \in \mathcal{F}$, then $A \cap B \in \mathcal{F}$.
\end{enumerate}
\textbf{Examples.}
\begin{enumerate}
  \item $\{A \subset \N: 1 \in A\}$.
  \item $\{A \subset \N: 1,2 \in A\}$.
  \item \textsc{Not} $\{A \subset \N: A \text{ infinite}\}$.
  \item $\{A \subset \N: A^c \text{ finite}\}$ - the \emph{cofinite} filter.
  \item $\{A \subset \N: 2\N \setminus A \text{ is finite}\}$.
\end{enumerate}
An \emph{ultrafilter} is a maximal filter.
\textbf{Examples.} Consider the previous examples of filters. Are they ultrafilters?
\begin{enumerate}
  \item Yes. (and for each $x \in \N$, we have $\{A \subset \N: x\in A\}$, the \emph{principal ultrafilter at x}, written $\tilde{x}$).
  \item No. It's contained in $\tilde{1}$ (and in $\tilde{2}$).
  \item No. It's not even a filter.
  \item No. It's contained in 5.
  \item No. It's contained in $\{A \subset \N: 4\N \setminus A \text{ is finite}\}$.
\end{enumerate}
\begin{proposition}
\end{proposition}
\begin{proof}
  One direction is trivial - we cannot add $A$ to $\mathcal{F}$ if $\mathcal{F}$ already contains $A$ or $A^c$.

  For the other direction, suppose $\mathcal{F}$ is maximal and doesn't contain $A$.

  We must have some $B \in \mathcal{F}$ with $B \cap A = \emptyset$, since otherwise $\{C \subset \N: C\supset A \cap B \text{ for some }B \in \mathcal{F}\}$ is a filter that extends $\mathcal{F}$.

  But then $B \subset A^c \implies A^c \in \mathcal{F}$.
\end{proof}
\textbf{Remark.} We thus also have, for an ultrafilter $\mathcal{U}$, that if $A \in \mathcal{U}$ and $A = B \cup C$ then $B \in \mathcal{U}$ or $C \in \mathcal{U}$.
\begin{theorem}
  Every filter is contained in an ultrafilter.
\end{theorem}
\begin{proof}
  For a filter $\mathcal{F}_0$, we seek a maximal element of $X = \{\mathcal{F}: \mathcal{F} \supset \mathcal{F}_0\}$. By Zorn, it is enough to check that every non-empty chain in $X$ has an upper bound in $X$. Given such a chain $(\mathcal{F}_i)_i$, set $\mathcal{F} = \bigcup_i \mathcal{F}_i$. Then we need that $\mathcal{F}$ is a filter (clearly $\mathcal{F} \supset \mathcal{F}_0$).

  We check the axioms:
  \begin{enumerate}
    \item $\emptyset \notin \mathcal{F}$, as $\emptyset \notin \mathcal{F}_i$ for each $i$.
    \item Given $A \in \mathcal{F}, B \supset A$, we have $A \in \mathcal{F}_i$ for some $i$, so $B \in \mathcal{F}_i \subset \mathcal{F}$.
    \item Given $A, B \in \mathcal{F}$, we have $A \in \mathcal{F}_i, B \in \mathcal{F}$, where without loss of generality $\mathcal{F}_i \supset \mathcal{F}_j$. So $A \cap B \in \mathcal{F}_j$.
  \end{enumerate}
\end{proof}
\textbf{Remarks.} There must then be a non-principal ultrafilter - just take one extending the cofinite filter. Conversely, if $\mathcal{U}$ is non-principal then it must extend the cofinite filter. Indeed, suppose not. Then there is some finite $A \in \mathcal{U}$. But then by the previous remark after \textbf{5.1}, we can break $A$ apart into $|A|$ singletons, one of which must be in $\mathcal{U}$.

Some form of choice/Zorn is necessary to exhibit a non-principal ultrafilter, and so we can't do so explicitly. If you ever think you have, you're wrong!

We write $\beta\N$ for the set of all ultrafilters on $\N$. We have a topology on $\beta\N$ by taking basic open sets $C_A = \{U \in \beta\N: A \in U\}$ for each $A \subset \N$. This is indeed a topology: $\bigcup_A C_A = \beta \N$ and $C_A \cap C_B = C_{A\cap B}$ is open.

Thus the open sets are $\bigcup_{i \in I} C_{A_i} = \{U : A_i \in U, \text{ some }i\}$.

The basic closed sets are $\beta \N-C_A = C_{A^c}$, and so the closed sets are $\bigcap_{i \in I}C_{A_i} =\{U: A_i \in U \forall i \}$.

Note that each $\tilde{n}$ is isolated, as $\tilde{n} = C_{\{n\}}$. Moreover, $\N$ (identified as $\{\tilde{n}: n \in \N\}\subset \beta \N$) is dense in $\beta \N$, as $\tilde{n} \in C_A$ for every $A \ni n$.
\begin{theorem}
  $\beta \N$ is compact and Hausdorff.
\end{theorem}
\begin{proof}
  For Hausdorff, given $U \neq V$, we have some $A \in U$ with $A \notin V$. So $A^c \in V$. Thus $U \in C_A, V \in C_{A^c}$, and $C_A \cap C_{A^c} = \emptyset$.

  For compactness, need to show that, if $F_i: i \in I$ are closed sets with the finite intersection property, then $\bigcap_{i \in I}F_i \neq \emptyset$. WLOG, each $F_i$ is basic, so $F_i = C_{A_i}$.

  Note that the sets $A_i$ also have the finite intersection property, as $C_{A_1}\cap \ldots C_{A_n} = C_{A_1 \cap \ldots \cap A_n}$.

  Now define $F = \{A \subset \N: A \cap A_{i_1}\cap \ldots \cap A_{i_n}$ for some $n \in \N, i_1, \ldots, i_n \in I\}$.

  Then $F$ is a filter. Let $U \in \beta \N$ extend $F$. So $A_i \in U$ for all $i$, i.e. $U \in C_{A_i} \forall i$.
\end{proof}
\textbf{Remarks.} Or we can view an ultrafilter as a function $\powset(\N) \to \{0,1\}$, i.e. as a point in $\{0,1\}^{\powset(\N)}$, so $\beta \N \subset \{0,1\}^{\powset(\N)}$. It can be checked that the topology on $\beta \N$ is the restriction of the product topology, and that $\beta \N$ is closed in the product, hence by Tychonoff $\beta \N$ is compact.

$\beta \N$ is the biggest compact Hausdorff space in which $\N$ is dense. More any continuous function $f:\N \to X$ for $X$ compact Hausdorff extends to a unique continuous function $\beta \N \to X$. For this reason $\beta \N$ is called the Stone-Cech compactification of $\N$.

For an ultrafilter $U$ and statement $p(x)$, we write $\forall_U x, p(x)$ if $\{x:p(x)\text{ is true}\}\in U$. E.g., for $U$ non-principal, $\forall_U x : x > 17$. I.e., according to the ultrafilter $U$, the set of $x$ where $x \leq 17$ is a small set. Or, if $U$ is principal at $7$, $\forall_U x p(x) \iff p(7)$.

Ultrafilter quantifiers behave `perfectly' with respect to logical connectives, as follows.
\begin{proposition}
  Let $U$ be an ultrafilter and $p(x), q(x)$ statements.
  \begin{enumerate}
    \item $\forall_U x\: p(x) \wedge q(x) \iff \forall_U x\: p(x) \wedge \forall_U x\: q(x)$.
    \item $\forall_U x\: p(x)\vee q(x) \iff \forall_U x\: p(x) \vee \forall_U x\: q(x)$.
    \item $\neg \forall_U x\: p(x) \iff \forall_U x\: \neg p(x)$.
  \end{enumerate}
\end{proposition}
\begin{proof}
  Write $A = \{x : p(x)\}, B = \{x: q(x)\}$. So (1) says $A\cap B \in U \iff A \in U \vee B \in U$, which is true.

  (2) says $A \cup B \in U \iff A \in U \vee B \in U$, which is true.

  (3) says $A \notin U \iff A^c \in U$, which is true.
\end{proof}
\textbf{Remark.} It is not true that $\forall_U x \forall_V y p(x,y) \iff \forall_V y \forall_u x p(x,y)$, even when $U =V$.

For example, let $U$ be non-principal. Then $\forall_U x \forall_U y\: x<y$ is true. But $\forall_U y \forall_U x\: x<y$ is false.

For $U, V \in \beta\N$, let $U+V = \{A \subset \N: \forall_U x \forall_U y\:x+y \in A\}$. E.g. $\tilde{m}+\tilde{n} = \tilde{m+n}$. Note that $U+V$ is an ultrafilter:
\begin{itemize}
  \item $\emptyset \notin U+V$
  \item If $A \in U+V$ and $B \supset A$, then $B \in U+V$.
  \item If $A,B \in U+V$ then $\forall_U x \forall_V y\: x+y \in A$ and $\forall_U x \forall_V y\: x+y \in B$. So $\forall_U x \forall_V y \: x+y \in A\cap B$, and so $A\cap B \in A+V$.
  \item If $A \notin U+V$, then we do not have $\forall_U x \forall_V y \: x+y \in A$, so $\forall_U x \forall_V y\: x+y \in A^c$. Hence $A^c \in U+V$.
\end{itemize}
Note that $+:\beta\N \times \beta \N \to \beta\N$ is associative. Indeed, $U+(V+W) = \{A \subset \N: \forall_U x \forall_V y \forall_W z\:x+(y+z)\in A\} = (U+V)+W$. Also, $+$ is left-continuous: for fixed $V$, the map $U \mapsto U+V$ is continuous. Indeed, for a basic open set $C_A$, $U+V \in C_A \iff A \in U+V \iff \forall_U x \forall_V y\:x+y \in A \iff U \in C_{\{x: \forall_V y\:x+y \in A\}}$.

In fact, $+$ is not commutative and is not right-continuous. We seek $U$ with $U+U = U$ (an idempotent). Of course, such a $U$ cannot be principal, since $\tilde{n} + \tilde{n} = \tilde{2n}$, so we can't hope to write it down explicitly.

\begin{lemma}[Idempotent Lemma]
  There is $U \in \beta \N$ with $U+U = U$.
\end{lemma}
What we will use is: $\beta \N$ is compact, Hausdorff, non-empty, and $+$ is associative and left-continuous.
\begin{proof}
  Idea: look for a minimal compact subset $M$ of $\beta \N$ with $M+M \subset M$ (i.e. $\{x+y:x, y \in M\}$), and hope $M$ is a singleton. We know at least one such subset exists, as $\beta \N + \beta \N \subset \beta \N$, so taking $M = \beta\N$ works, but probably isn't minimal.

  So, by Zorn, it is enough to show that if $M_i: i \in I$ form a chain of such sets, then $M \coloneqq \bigcap_{i \in I} M_i$ is also such a set.

  $M$ is compact, since $M$ is an intersection of closed sets and $\beta \N$ is a compact Hausdorff space.

  $M$ is nonempty, as the $M_i$ are closed sets with the finite intersection property, so $\bigcap_{i \in I} M_i$ is nonempty, since $\beta \N$ is compact.

  Given $x, y \in M$, we have $x, y \in M_i$ for every $i$, so $x+y \in M_i$ for every $i$, and hence $M + M \subset M$.

  Fix such a minimal set $M$ and fix $x \in M$. Then $M+x \subset M$, and is nonempty. By left-continuity, $M+x$ is compact. Also, $(M+x)+(M+x) =(M+x+M)+x \subset M+x$, so $M+x = M$, by minimality of $M$.

  Then there is $y \in M$ with $y+x = x$. Let $N = \{y \in M : y+x = x\}$. Certainly, $N \neq \emptyset$, and $N$ is compact, the inverse image of $\{x\}$ under a continuous function. If $y, z \in N$, then $y+z \in N$. So $N = M$, by minimality of $M$.

  So $x \in N$, i.e. $x+x= x$.
\end{proof}
Note that this does give $M =\{x\}$ by minimality. This gives a subgroup of $\beta \N$ isomorphic to the trivial group. Does $\beta \N$ contain any other finite subgroups? This is the finite subgroup problem. The answer is no, proven by Zelenyuk, 1996.
\begin{theorem}[Hindman]
  Whenever $\N$ is finitely coloured, there are $x_1, x_2, \ldots$ with $FS(x_1, x_2, \ldots)$ monochromatic.
\end{theorem}
\begin{proof}
  Fix an idempotent $U \in \beta \N$ ($U$ will be making lots of passes and choices for us). Given a finite colouring of $\N$, let $A$ be the colour class in $U$. We have $\forall_U y\: y \in A$, so $\forall_U x \forall_U y\: x+y \in A$ by idempotentness.

  So $\forall_U x \forall_U y\:FS(x,y) \subset A$.

  Fix $x_1$ with $\forall_U y\:FS(x,y) \subset A$. Inductively, suppose we have chosen $x_1, \ldots, x_n$ such that, $\forall_U y\:FS(x_1, \ldots, x_n, y) \subset A$. So for each $z \in FS(x_1, \ldots, x_n)$ we have $\forall_U y\:z+y \in A$, and so $\forall_Ux \forall_U y\:x+y+z \in A$, as $U$ is idempotent. So then $\forall_U x \forall_U y\:FS(x_1, \ldots, x_n, x,y) \subset A$. Let $x_{n+1}$ be such an $x$. Then $\forall_U y\:FS(x_1, \ldots, x_n, x_{n+1}, y) \subset A$.

  Then we are done by induction.
\end{proof}
Very few examples of infinite partition regular systems are known. There is no Rado-type theorem. The consistency theorem we had fails for infinite PR systems. For example, whenever $\N$ is finitely coloured, there are $x_1, x_2, \ldots$ with $FS_{1,2}(x_1, x_2, \ldots) = \{\sum_{ i \in I}x_i  + 2 \sum_{ i \in J}x_i : I, J \text{ finite nonempty, }\max I < \min J\}$ monochromatic. This is a consequence of the Milliken-Taylor theorem. But it was proven in 1995 that this system is inconsistent with Hindman.

It follows trivially from Hindman's theorem that, whenever $\N$ is finitely coloured, there are $x_1, x_2, \ldots$ such that all $x_i$ and all $x_i+x_j$ have the same colour. Is there a proof not via Hindman? More precisely, is there a set $S \subset \N$ such that whenever $S$ is finitely coloured there is such a system, but false for the Hindman system.

\section{Infinite Ramsey Theory}
We know that, whenever $\N^{(r)}$ is 2-coloured, then there exists an infinite monochromatic set $M$.

What if we 2-colour the infinite subsets of $\N$, i.e. $\N^{(\omega)}$? Must there be an infinite monochromatic $M$, i.e. $M \in \N^{(\omega)}$ such that $c$ is constant on $M^{(\omega)}$.

E.g. colour $M = \{a_1, a_2, \ldots\}$ red if $\sum_{n}\frac{1}{a_n}$ converges, and blue if not. Then there is a infinite monochromatic subset - take $M = \{1, 2, 4, 8, \ldots\}$.

Sadly, in general, this is not true.
\begin{proposition}
  There is a 2-colouring of $\N^{(\omega)}$ for which no $M \in \N^{(\omega)}$ is monochromatic.
\end{proposition}
\begin{proof}
  We will find a colouring $c$ such that, for every infinite $M$ and every $x \in M$, the colour of $M$ is different to the colour of $M \setminus \{x\}$. Then we are done.

  We define a relation $\thicksim$ on $\N^{(\omega)}$ by $L \thicksim M$ if $L \triangle M$ finite. This is an equivalence relation. Let it have equivalence classes $E_i$.

  In each $E_i$, pick a `reference set' $M_i$. For any $M \in \N^{(\omega)}$, say $M \in E_i$. Colour $M$ red if $|M \triangle M_i|$ is even and blue if odd.
\end{proof}
\textbf{Remark.} We used the axiom of choice to pick the $M_i$.

A 2-colouring of $\N^{(\omega)}$ corresponds to a partition $Y \cup Y^c = \N^{(\omega)}$, for some $Y \subset \N^{(\omega)}$. We say $Y \subset \N^{(\omega)}$ is \emph{Ramsey} if there is $M \in \N^{(\omega)}$ with $M^{(\omega)} \subset Y$ or $M^{(\omega)} \subset Y^c$. In other words, \textbf{6.1} says ``not all sets are Ramsey''. We no ask ``Which sets are Ramsey? Are `nice' sets Ramsey?''

We have $\N^{(\omega)} \subset \powset(\N) \cong \{0,1\}^{\N}$, so we have a product topology on $\N^{(\omega)}$. We have a metric $d(L,M) = 0$ if $L = M$, otherwise $ = \frac{1}{\min L \triangle M}$.

The basic open neighbourhoods of $M \in \N^{(\omega)}$ is $\{L: A \text{ is an initial segment of }L \}$, for each finite initial segment $A$ of $M$. A base of open sets in total is $\{L: A\text{ is an initial segment of }L\}$ for each finite $A \subset \N$.

\textbf{Remark.} We have $\N^{(\omega)} \cong (0,1] \subset \R$ by binary expansion. This is nearly a homeomorphism - it is indeed a bijection, and it only fails at dyadic rationals. For example:
\begin{align*}
  &0.1110101010101\ldots\\
  &0.1110010010010\ldots\\
  &0.1110001000100\ldots\\
  &\vdots
\end{align*}
converges to $0.110111111\ldots$, but the sets corresponding to them don't.

This topology is called the \emph{product topology} or \emph{usual topology} or the \emph{$\tau$-topology}.

The \emph{Borel sets} in a topology set $X$ are the smallest family of subsets of $X$ that include the open sets and are closed under complement and countable union.

E.g. in $\R$, open sets, closed sets, countable sets, countable unions of countable intersections of open sets, etc, are all Borel. Essentially, just about every set that we can describe explicitly is Borel.

For a power series $\sum a_n z^n$, the set $\{z \in \C: \sum a_n z^n \text{ converges}\}$ is Borel. Indeed, it is $\{z \in \C: \forall \epsilon >0 \exists N \st \forall m,n \geq N:\left|\sum_{m}^{n}a_i z^i \right| \leq \epsilon\}$. This is a countable intersection of countable unions of closed sets.

Our eventual aim is to show that Borel sets are Ramsey. We will first show that open sets are Ramsey.

\subsection{Sociology}
Write $M^{(<\omega)}$ for $\{A \subset M: A \text{ finite}\}$, for any $M \in \N^{(\omega)}$. For $A \in \N^{(<\omega)}, M\in \N^{(\omega)}$, we write $(A,M)^{(\omega)} = \{L \in \N^{(\omega)} : A \text{ an initial segment of }L, L\setminus A \subset M\}$.

For fixed $Y \subset \N^{(\omega)}$ and $M \in \N^{(\omega)}, A \in \N^{(<\omega)}$, we say $M$ \emph{accepts} $A$ into $Y$ if $(A, M)^{(\omega)} \subset Y$. We say $M$ \emph{rejects} $A$ if no $L \in M^{(\omega)}$ accepts $A$.

\textbf{Remarks.}
\begin{enumerate}
  \item If $M$ accepts $A$, then any $L \in M^{(\omega)}$ accepts $A$.
  \item If $M$ rejects $A$, then any $L \in M^{(\omega)}$ rejects $A$.
  \item If $M$ accepts $A$, then $M$ accepts any $A\cup B$, where $B \in M^{(\omega)}$ with $\min B > \max A$.
  \item $M$ needn't accept or reject $A$.
\end{enumerate}
\begin{lemma}[Galvin-Prikry]
  Let $Y \subset \N^{(\omega)}$. Then there exists $M \in \N^{(\omega)}$ such that either
  \begin{enumerate}
    \item $M$ accepts $\emptyset$, or
    \item $M$ rejects all of its finite subsets.
  \end{enumerate}
\end{lemma}
\begin{proof}
  Suppose that no $M \in \N^{(\omega)}$ accepts $\emptyset$, i.e. $\N$ rejects $\emptyset$. We'll construct inductively infinite sets $M_1 \supset M_2 \supset \ldots$ and $a_1 < a_2 < \ldots$ with $a_i \in M_i$ for all $i$ such that $M_i$ rejects all subsets of $\{a_1, \ldots, a_{i-1}\}$. Then we will be done, because the set $\{a_1, a_2, \ldots\}$ rejects all of its finite subsets.

  Take $M_1 = \N$. $M_1$ rejects all subsets of $\emptyset$.

  Suppose we've chosen $M_1, \ldots, M_k$, and $a_1, \ldots, a_{k-1}$, we seek $M_{k+1} \subset M_k$ and $a_k \in M_k, a_k > a_{k-1}$ such that $M_{k+1}$ rejects all subsets of $\{a_1, \ldots, a_k\}$.

  Fix $b_1 \in M_k, b_1 > a_{k-1}$, and try $a_k = b_1, M_{k+1} = M_k$. We must have some $N_1 \subset M_k$ accepting some subset of $\{a_1, \ldots, a_{k-1}, b_1\}$, otherwise we are done. This subset has to involve $b_1$, so is of the form $E_1 \cup \{b_1\}$ for some $E_1 \subset \{a_1, \ldots, a_{k-1}\}$, as $M_k$ rejects all subsets of $\{a_1, \ldots, a_{k-1}\}$.

  Now fix $b_2 \in N_1$, $b_2 > b_1$, and try $a_k = b_2, M_{k+1} = N_1$. We must have have some $N_2 \subset N_1$ accepting some $E_2 \cup \{b_2\}$ where $E_2 \subset \{a_1, \ldots, a_{k-1}\}$. Keep going. We obtain $M_k \supset N_1 \supset N_2 \supset \ldots$ and $a_{k-1} < b_1<b_2<\ldots$ with $b_{i+1} \in N_i$ and $N_i$ accepting $E_i \cup \{b_i\}$ for some $E_i \subset \{a_1, \ldots, a_{k-1}\}$. Pass to a subsequence to assume $E_i = E$ for all $i$.

  Thus $\{b_1, b_2, \ldots\}$ accepts $E$, contradicting $M_k$ rejects $E$.
\end{proof}
\begin{theorem}
  Let $Y \subset \N^{(\omega)}$ be open. Then $Y$ is Ramsey.
\end{theorem}
\begin{proof}
  Choose an infinite $M$ as given by Galvin-Prikry. If $M$ accepts $\emptyset$, then done. So we may assume $M$ rejects all of its finite subsets. We claim $M^{(\omega)} \subset Y^c$. Indeed, some $L \subset M$ has $L \in Y$. Since $Y$ is open, we have $(A, \N)^{(\omega)} \subset Y$ for some finite initial segment $A$ of $L$.

  In particular, $(A, M)^{(\omega)}\subset Y$, i.e. $M$ accepts $A$, contradicting the fact that $M$ rejects $A$.
\end{proof}
Note that $Y$ Ramsey if and only if $Y^c$ Ramsey, so this theorem also says that closed sets are Ramsey.

\begin{definition}
  The \emph{$\star$-topology} or \emph{Ellentuck-topology} or \emph{Mathias-topology} on $\N^{(\omega)}$ has basic open sets $(A, M)^{(\omega)}$, each $A \in \N^{(<\omega)}, M \in \N^{(\omega)}$.
\end{definition}
This is a base for a topology:
\begin{enumerate}
  \item $\N^{(\omega)} = (\emptyset, \N)^{(\omega)}$, so union of all $(A, M)^{(\omega)} = \N^{(\omega)}$.
  \item $(A,M)^{(\omega)} \cap (A', M')^{(\omega)} = (A\cup A', M \cap M')^{(\omega)}$ or $\emptyset$.
\end{enumerate}
This is a finer topology than the $\tau$-topology.
\begin{theorem}
  Let $Y \subset \N^{(\omega)}$ be $\star$-open. Then $Y$ is Ramsey.
\end{theorem}
\begin{proof}
  Choose an infinite $M$ as given by Galvin-Prikry. If $M$ accepts $\emptyset$, then done: $M^{(\omega)} \subset Y$. So assume $M$ rejects all of its finite subsets. Then we claim $M^{(\omega)} \subset Y$.

  Suppose not. Some $L \subset M$ has $L \in Y$. Since $Y$  is $\star$-open, we have $(A, L)^{(\omega)}\subset Y$ for some finite initial segment $A$ of $L$. In other words, $L$ accepts $A$, contradicting the fact that $M$ rejects $A$.
\end{proof}
As before, $\star$-closed sets are Ramsey.

\begin{definition}
  We say $Y \subset \N^{(\omega)}$ is \emph{completely Ramsey} if, for every $A \in \N^{(<\omega)}$, $M \in \N^{(\omega)}$, there is $L \in M^{(\omega)}$ such that $(A,L)^{(\omega)}\subset Y$ or $(A, L)^{(\omega)}\subset Y^c$.
\end{definition}
This is a stronger notion than just Ramsey. Indeed, let $Y$ be the non-Ramsey set from \textbf{6.1}, and put $Z = Y \cup \{M \in \N^{(\omega)}: 1 \notin M\}$. Then $Z$ is Ramsey: $\{2, 3, \ldots\}^{(\omega)} \subset Z$. However, $Z$ is not completely Ramsey: there is no $L \in \N^{(\omega)}$ with $(\{1\}, L)^{(\omega)} \in Y$ or in $Y^c$.

\begin{theorem}
  Let $Y \subset \N^{(\omega)}$ be $\star$-open. Then $Y$ is completely Ramsey.
\end{theorem}
\begin{proof}
  Given $(A,M)^{(\omega)}$, we seek $L \subset M$ such that $(A,L)^{(\omega)} \subset Y$ or $Y^c$. We now view $(A,M)^{(\omega)}$ as a copy of $\N^{(\omega)}$, as follows. Without loss of generality, $\max A < \min M$. Write $M = \{m_1, m_2, \ldots\}$ in increasing order.

  Define $f:\N^{(\omega)} \to (A, M)^{(\omega)}$, given by $L \mapsto A \cup \{M_i: i \in L\}$. Then $f$ is a homeomorphism in the $\star$-topology. Let $Y' = \{L \in \N^{(\omega)} : f(L) \in Y\}$. Then $Y'$ is $\star$-open, being the inverse image of an open set under a continuous function.

  So $Y'$ is Ramsey, i.e. there is $L \in \N^{(\omega)}$ such that $L^{(\omega)} \subset Y'$ or $Y'^c$. Now apply $f$. Then $f(L^{(\omega)}) \subset Y$ or $Y^c$, i.e. $(A, \{M_i: i \in L\})^{(\omega)} \subset Y$ or $Y^c$.
\end{proof}
Similarly, $\star$-closed sets are completely Ramsey.

Having dealt with the ``locally big'' sets, namely the open sets, we now turn to the ``locally small'' sets, namely the sets that are not dense on any interval. I.e., $\bar{Y}$ has empty interior, so that for any non-empty open $O \subset X$ there is a non-empty open $O' \subset O$ with $O'\cap Y = \emptyset$.

For example, in $\R$, $\N$ is nowhere dense. Or $\{1, \frac12, \frac13, \frac14, \ldots\}$ is nowhere dense. But $\Q \cap (0,1)$, although not dense in $\R$, is dense in $[0,1]$, so is not nowhere dense.

\begin{proposition}
  Let $Y \subset \N^{(\omega)}$ be nowhere dense. Then $Y$ is $\star$-nowhere dense if and only if, for every $A \in \N^{(<\infty)}$, $M \in \N^{(\omega)}$, there is $L \in M^{(\omega)}$ with $(A,L)^{(\omega)} \subset Y^c$.

  In particular, $\star$-nowhere dense sets are completely Ramsey.
\end{proposition}
\begin{proof}
  If $Y$ is nowhere dense, then inside every $(A, M)^{(\omega)}$ there is $(B, L)^{(\omega)} \subset Y^c$.

  The right hand side of the iff says: inside every $(A, M)^{(\omega)}$ we can find $(A, L)^{(\omega)} \subset Y^c$.

  So certainly RHS implies LHS.

  For LHS implies RHS, given $(A,M)^{(\omega)}$, we have $\bar{Y}$ has no interior. Now $\bar{Y}$ is completely Ramsey, as it is closed. So there is $L \in M^{(\omega)}$ with $(A,L)^{(\omega)} \subset \bar{Y}$ or $\bar{Y}^c$. We cannot have $(A,L)^{(\omega)} \subset \bar{Y}$ as $\bar{Y}$ has no interior, so $(A,L)^{(\omega)} \subset \bar{Y}^c \subset Y^c$, so we're done.
\end{proof}
Say a subset $Y$ of a topological space $X$ is \emph{meagre} if it's a countable union of nowhere dense sets.

For instance $\Q \subset \R$ is meagre, being $\bigcup_{n \in \N}\frac{1}{n}\Z$ (and yet also dense).

One often thinks of meagre sets as being small - the Baire category theorem states that if $X$ is a non-empty complete metric space, then $X$ itself is not meagre.
\begin{theorem}
  Let $Y \subset \N^{(\omega)}$ be $\star$-meagre. Then for all $A \in \N^{(<\omega)}, M\in \N^{(\omega)}$, there is $L \in M^{(\omega)}$ with $(A,L)^{(\omega)} \subset Y^c$. In particular, $Y$ is $\star$-nowhere dense.
\end{theorem}
\begin{proof}
  Let $Y = \bigcup_{n=1}^\infty Y_n$, each $Y_n$ $\star$-nowhere dense.

  Given $(A,M)^{(\omega)}$, choose $M_1 \subset M$ with $(A, M_1)^{(\omega)}\subset Y_1^c$. Pick $x_1 \in M_1, x_1> \max A$. Now apply \textbf{6.8} to get $M_2'\subset M_1$ with $(A,M_2')^{(\omega)}\subset Y_2^c$, and again, to get $M_2 \subset M_2'$ with $(A\cup \{x_1\}, M_2)^{(\omega)} \subset Y_2^c$.

  Pick $x_2 \in M_2, x_2 > x_1$. Now apply \textbf{6.8} 4 times, to get $M_3 \subset M_2$ with $(A,M_3)^{(\omega)}$ and $(A\cup \{x_1\}, M_3)^{(\omega)}$, $(A\cup\{x_2\}, M_3)^{(\omega)}, (A\cup\{x_1,x_2\}, M_3)^{(\omega)} \subset Y_3^c$.

  Continue. We obtain $M \supset M_1 \supset M_2 \supset \ldots$ and $\max(A) < x_1 < x_2 < \ldots$ with $x_n \in M_n$ for all $n$, and $(A\cup F, M_n)^{(\omega)} \subset Y_n^c$ for all $F \subset \{x_1, x_2, \ldots, x_{n-1}\}$. Now we're done because $(A, \{x_1, x_2, \ldots\})^{(\omega)} \subset Y_n^c$ for all $n$, so $\subset Y^c$.
\end{proof}
\end{document}
